---
title: "Data Tidying"
output: Tidy Dataset
---

This is an [R Markdown](http://garrettgman.github.io/tidying/) Notebook. “tidy data,” a way to organize your data that works particularly well with R. 
Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Cmd+Option+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Cmd+Shift+K* to preview the HTML file). 

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.



## Package Creatation
```{r}

# Loading required package: 
install.packages("usethis")
install.packages(c("devtools", "roxygen2", "testthat", "knitr", "tidyr", "dplyr", "ggplot2"))

#devtools::install_github("tidyverse/forcats")
devtools::install_github("garrettgman/DSR",force = TRUE)
library(usethis)
library(devtools)
library(roxygen2)
library(testthat)
library(tidyr)
library(DSR)

# version of devtools?
# packageVersion("devtools")
# devtools::session_info()


```

```{r}
getwd()

devtools::create("/Users/leilayousefi/LeilaDocuments/git/MoJ/TidyData/DataTidying")
```

## Git Repo
cd DataTidying 
git status 
git add . -n
git add .
git commit -m "created package in R" 
git status 
git push



## tidy data

This section introduces “tidy data,” a way to organize your data that works particularly well with R.

```{r}



```

## making untidy data tidy
reorganize the values in your data set with the the spread() and gather() functions of the tidyr package.

```{r}
library(DSR)
# Data set one
table1

# Data set two
table2

# Data set three
table3

# Data set four
table4  # cases

table5  # population


```

```{r}
mean(table1$cases)
table1$cases / table1$population * 10000
```

Each variable in the data set is placed in its own column
Each observation is placed in its own row
Each value is placed in its own cell*

## split apart and combine values in your data set to make them easier to access with R

```{r}

library(tidyr)
spread(table2, key, value)
```

## R factors
R uses factors to handle categorical variables, variables that have a fixed and known set of possible values. Factors are also helpful for reordering character vectors to improve display. The goal of the forcats package is to provide a suite of tools that solve common problems with factors, including changing the order of levels or the values. Some examples include:

fct_reorder(): Reordering a factor by another variable.
fct_infreq(): Reordering a factor by the frequency of values.
fct_relevel(): Changing the order of a factor by hand.
fct_lump(): Collapsing the least/most frequent values of a factor into “other”.
You can learn more about each of these in vignette("forcats"). If you’re new to factors, the best place to start is the chapter on factors in R for Data Science.

```{r}
library(forcats)
library(dplyr)
library(ggplot2)

print(starwars)

starwars %>% 
  filter(!is.na(species)) %>%
  count(species, sort = TRUE)

starwars %>%
  filter(!is.na(species)) %>%
  mutate(species = fct_lump(species, n = 3)) %>%
  count(species)

ggplot(starwars, aes(x = eye_color)) + 
  geom_bar() + 
  coord_flip()

starwars %>%
  mutate(eye_color = fct_infreq(eye_color)) %>%
  ggplot(aes(x = eye_color)) + 
  geom_bar() + 
  coord_flip()
```


## combining everything you’ve learned about tidyr to tidy a real data set on tuberculosis epidemiology collected by the World Health Organization.
